<!DOCTYPE html>
<html lang="eng-us">

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Pong 2180</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Pong 2180 User Interface</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


    <!-- Bootstrap CDN-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <!--    <link rel="stylesheet" href="assets/css/maps.css">    -->
    <link rel="stylesheet" type="text/css" src="assets/css/map-icons.css">
    <link rel="stylesheet" href="assets/css/theater.css">
    <link rel="stylesheet" href="assets/css/style_test.css">

    <script src="https://www.gstatic.com/firebasejs/4.12.1/firebase.js"></script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="assets/javascript/moment.js"></script>
    <script src="assets/javascript/numeral.js"></script>

</head>

<body>

    <header style="color:white; ">
        <div class="row">
            <!--Site Logo-->
            <div class="col-xs-4">
                <a href='/'>
                    <img src='assets/images/pong6.png' alt='Pong 2108 Logo' id='pageLogo' class='img img-thumbnail' style="width: 80px;">
                </a>
            </div>
            <!--Title-->
            <div class="col-xs-4">
                <h1 class='bungeeFont' style='color:white; '>Pong 2180 Demo</h1>
            </div>
            <!--Logged In Area-->
            <div class="col-xs-4">
                <button type="button" id="info" class="btn btn-default btn-lg btn-warning" style="margin: 0px 0px 0px 50px;">
                    <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
                </button>
            </div>
        </div>
    </header>


    <style>
        header {
            color: white;
            background-image: linear-gradient(180deg, rgba(224, 133, 14, 1), rgba(173, 52, 62, 1));
        }

        body {
            background-image: url('./assets/images/matrixgridfloor.png');
        }

        .monotonFont {
            font-family: 'Monoton', cursive;
        }
    </style>


    <div class="wrapper" id="page1">
        <div class="container" style='opacity: 0.90; width: 480px;'>
            <div class="panel panel-info" style="padding:3px; margin: 3px; opacity: 1.0; z-index: 5; ">
                <div class="panel-body" style="padding:3px; margin: 3px;">
                    <div class="wrapper">
                        <div class="row">
                        </div>
                        <div class="row">
                            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-3">
                                <label>Ball : </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-3">
                                <label>Lat </label>
                            </div>
                            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-3">
                                <label id="ball-pos-lat">- - - - </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-3">
                                <label>Lon </label>
                            </div>
                            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-3">
                                <label id="ball-pos-lon">- - - - </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-2 col-md-2 col-sm-2 col-xs-3">
                                <label>Speed </label>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                <label id="ball-vel-in">- - - - </label>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                <label id="ball-vel-mph">- - - - </label>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-2">
                                <label> </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 col-md-2 col-sm-2">
                                <label>Distances:</label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                <label>player #1</label>
                            </div>
                            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                                <label id="loc-play1">- - - - </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 col-md-2 col-sm-2 col-xs-3">
                                <label> </label>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                <label id="ball-dist-play1">- - - - </label>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                <label id="ball-miles-play1">- - - - </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 col-md-2 col-sm-2 col-xs-3">
                                <label> </label>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                <label id="ball-time-play1">- - - - </label>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                <label id="ball-min-play1">- - - - </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2">
                                <label> </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                <label>player #2</label>
                            </div>
                            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                                <label id="loc-play2">- - - - </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                <label> </label>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                <label id="ball-dist-play2">- - - - </label>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                <label id="ball-miles-play2">- - - - </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                                <label> </label>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                <label id="ball-time-play2">- - - - </label>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                <label id="ball-min-play2">- - - - </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2">
                                <label> </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="colg-lg-3 col-md-3 col-sm-3 col-xs-3">
                                <label>player 1 to 2</label>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                <label id="ball-dist-total">- - - - </label>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                <label id="ball-miles-total">- - - - </label>
                            </div>
                        </div>

                    </div>
                </div>

            </div>
            <div class="panel panel-info" style="padding:3px; margin: 3px;">
                <div class="panel-body" style="padding:3px; margin: 3px;">

                    <div id="divMap" style="height:640px; width:420px; padding:2px; opacity: 0.90; ">
                        <div class="modal-content" style="height:90%; width:90%; margin:0px; padding: 2px">
                            <span>
                                <h2>Pong 2180</h2>
                            </span>
                            <div id="map" style="height:85%; width:100%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!-- Modal windows come up next -->
        <!-- Info Modal -->
        <div id="modInfo" class="modal" style="height: 90%; width:90%;">
            <div class="modal-content" style="height:90%; width:90%;">
                <span id="closeModInfo" class="close close-Info">&times;</span>
                <h2>
                    <p>Information:</p>
                </h2>
                <p>Demonstration of Pong 2180</p>
                <p>Demo not fully styled, shows a demo game in progress.</p>
                <p>If BALL IS NOT MOVING then go back one screen and pick demo again.</p>
                <p>Ball is moving and its coordinates are constantly being computed. In addition, the distance between the players
                    is constantly being calculated. For this demo, player positions are pulled from a pre-programed list.
                </p>
                <p>To really see a neat demo, click on the maximize button on the map, then select the satellite image to watch
                    the ball sail over houses and landmarks </p>
                <p></p>
                <button class='btn-large btn-warning' style="float: right;" id="btn-info-2">More Info</button>
            </div>
        </div>
        <!-- Info #2 Modal -->
        <div id="modInfo2" class="modal" style="height: 90%; width:90%;">
            <div class="modal-content" style="height:90%; width:90%;">
                <span id="closeModInfo2" class="close close-Info">&times;</span>
                <h2>
                    <p>How it works:</p>
                </h2>
                <p>Player positions are moved whenever player #1 hits enough preset hits and is ready to hit again.
                   Player #2 moves to player #1 position and player #2 is picked from the next one in a list of pre-programed addresses. 
                </p>
                <p>A separate computer on the internet, called the pong physics engine is constantly running and looking for a game to simulate.
                    Currently, the physics engine can compute the trajectories for up to 50 games at 4x per second. When a signal is sent to the
                    engine, it solves basic kinematic equations for acceleration, velocity, and distance.</p>
                <p>
                    For every sample period the player's coordinates and distances are calculated. After that
                    the players latitude, longitude, and azimuth are calculated, using navigation equations. 
                    From there the balls coordinates are calculated by using kinematic equations.
                </p>    
                <p></p>
                <button class='btn-large btn-warning' style="float: right;" id="btn-info-3">More Info</button>
            </div>
        </div>
        <!-- Info #2 Modal -->
        <div id="modInfo3" class="modal" style="height: 90%; width:90%;">
            <div class="modal-content" style="height:90%; width:90%;">
                <span id="closeModInfo3" class="close close-Info">&times;</span>
                <h2>
                    <p>What this demonstrates:</p>
                </h2>
                <p>1. Running an "engine" to do simultaneous calculations</p>
                <p>2. Solving navigational and kinematic calculation efficiently</p>
                <p>3. Using an API to convert an address into a geo location (latitude and longitude)</p>
                <p>4. Using Google Maps to display data</p>
                <p>5. Update and move data points on a map real-time</p>
                <p>6. Rescale the map to contain all points if a player moves</p>
                <p>7. Using built in device sensors to detect a swing (game mode)</p>
                <p>8. Writing to simultaneous databases (real-time and sql)</p>
                <p> </p>
                <br/>
                <button class='btn-large btn-warning close-Info' style="float: right;" id="btn-info-2">Close</button>
            </div>
        </div>
        <!-- GPS Modal -->
        <div id="modLocation" class="modal">
            <div class="modal-content">
                <span id="closeModLocation" class="close">&times;</span>
                <h2>
                    <p>Searching for GPS location</p>
                </h2>
                <p> </p>
                <p>Please allow location privaledge and then wait</p>
            </div>
        </div>



        <!-- style="height:90%; width:1020px; padding:2px" -->
        <!-- style="height:70%; width:1000px; margin:0px; padding: 2px" -->
        <div id="modMap" class="modal" style="height:640px; width:640px; padding:2px">
            <div class="modal-content" style="height:90%; width:90%; margin:0px; padding: 2px">
                <span>
                    <h2>Map</h2>
                </span>
                <span id="closeModMap" class="close">&times;</span>
                <div id="map-orig" style="height:85%; width:100%"></div>
            </div>
        </div>


        <script src="assets/javascript/pong2180_rou.js"></script>
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAE03QBe5yDXRr1fzDvkWs9i_E_BIyCDhk&libraries=places" async
            defer></script>
        <script src="https://apis.google.com/js/api.js" type="text/javascript"></script>



        <script>
            var connConfig;  //global variable
            var modalWaitLocation = document.getElementById('modLocation'); //location
            var modalMap = document.getElementById('modMap'); //map modal popup
            var closeModMap = document.getElementById("closeModMap");

            var dispBallData = function () {
                $('#ball-pos-x').text(ballPosObj.coord_x);
                $('#ball-pos-y').text(ballPosObj.coord_y);
                $('#ball-pos-lat').text(ballPosObj.coord_lat);
                $('#ball-pos-lon').text(ballPosObj.coord_lon);
                $('#ball-dist-play1').text(ballDistObj.dist_ball_play_1);
                $('#ball-dist-play2').text(ballDistObj.dist_ball_play_2);
                $('#ball-dist-total').text(ballDistObj.dist_players);
                console.log(ballDistObj.dist_players);
            };



            $(document).ready(function () {
                //getLocation();

                //display the ball coords
                dispBallData();

                //starts the db connection
                startConnection();

                $(document.body).on("click", "#info", function () {
                    $("#modInfo").css("display", "block");
                });
                $(document.body).on("click", "#btn-info-2", function () {
                    $("#modInfo").css("display", "none");
                    $("#modInfo2").css("display", "block");
                });
                $(document.body).on("click", "#btn-info-3", function () {
                    $("#modInfo2").css("display", "none");
                    $("#modInfo3").css("display", "block");
                });
                $(document.body).on("click", ".close-Info", function () {
                    $("#modInfo").css("display", "none");
                    $("#modInfo2").css("display", "none");
                    $("#modInfo3").css("display", "none");
                });


                $("#bttnUserInput").on("click", function (event) {
                    //submit button was pushed
                    console.log("submit clicked");
                    event.preventDefault();
                    //already in 
                    if (configData.dispRichOutput === true) {
                        /*
                        theaterObj.searchLat = numeral($("#input-lat").val()).format("+0000.000000");
                        theaterObj.searchLon = numeral($("#input-lon").val()).format("+0000.000000");
                        */
                        var distInKM = parseFloat($("#input-dist").val()) * 1.60934;
                        theaterObj.searchLoc.dist = numeral(distInKM).format("+0000.0000");
                    };

                    if (theaterObj.searchLoc.lat === "+0000.000000" || theaterObj.searchLoc.long === "+0000.000000") {
                        //left blank, so put in Evanston as default
                        theaterObj.searchLoc.lat = numeral(42.048995).format("+0000.000000");
                        theaterObj.searchLoc.long = numeral(-87.684505).format("+0000.000000");
                    };

                    //for modal popups
                    modalMap.style.display = "none"; //initally off on page load
                    //document.getElementById("container-map").style.display = "block";

                    startSearches();
                    dispAllPage2(true);
                });
            });
        </script>

        <div class="text-center navbar navbar-fixed-bottom" id='footer'>
            <div class="container-fluid">
                <span id='copyright'>© 2180 Pong 2180 Corp.</span>
            </div>
        </div>
        <style>
            .navbar-fixed-bottom {
                background-image: linear-gradient(180deg, rgba(173, 52, 62, 1), rgba(224, 133, 14, 1));
                color: rgba(255, 255, 255, .6);
                padding: 20px;
            }
        </style>

</body>

</html>