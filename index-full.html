<!DOCTYPE html>
<html lang="eng-us">



<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Pong 2180 User Interface</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


    <!-- Bootstrap CDN-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <!--    <link rel="stylesheet" href="assets/css/maps.css">    -->
    <link rel="stylesheet" type="text/css" src="assets/css/map-icons.css">
    <link rel="stylesheet" href="assets/css/theater.css">
    <link rel="stylesheet" href="assets/css/style_test.css">

    <script src="https://www.gstatic.com/firebasejs/4.12.1/firebase.js"></script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="assets/javascript/moment.js"></script>
    <script src="assets/javascript/numeral.js"></script>

</head>

<body>
    <div class="wrapper" id="page1">
        <div class="container-fluid">
            <div class="panel panel-info" style="padding:3px; margin: 3px;">
                <div class="panel-body" style="padding:3px; margin: 3px;">
                    <div style="float: left;">
                        <h3 style="padding:3px; margin: 3px;">Pong 2180 User Demo</h3>
                    </div>
                    <button type="button" class="btn btn-default btn-lg btn-info" style="margin: 0px 0px 0px 50px;">
                        <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
                    </button>
                    <div class="wrapper">
                        <div class="row">
                            <div id="inputSect" style="margin:3px; padding:3px">
                                <label for="number-input">Address you are at</label>
                                <input type="text" id="input-addr" style="display:inline;" maxlength="40" size="40">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2 col-sm-2">
                                <label>Ball : </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2">
                                <label>X pos</label>
                            </div>
                            <div class="col-md-2">
                                <label id="ball-pos-x">- - - - </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2">
                                <label>Y pos</label>
                            </div>
                            <div class="col-md-2">
                                <label id="ball-pos-y">- - - - </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2">
                                <label>Lat </label>
                            </div>
                            <div class="col-md-2">
                                <label id="ball-pos-lat">- - - - </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2">
                                <label>Lon </label>
                            </div>
                            <div class="col-md-2">
                                <label id="ball-pos-lon">- - - - </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2">
                                <label>Speed </label>
                            </div>
                            <div class="col-md-2">
                                <label id="ball-vel-in">- - - - </label>
                            </div>
                            <div class="col-md-2">
                                <label id="ball-vel-mph">- - - - </label>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-2">
                                <label> </label>
                            </div>
                            <div class="col-md-2">
                                <label id=""> </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2">
                                <label>Distances:</label>
                            </div>
                            <div class="col-md-2">
                                <label id=""> </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2">
                                <label>to player #1</label>
                            </div>
                            <div class="col-md-2">
                                <label id="ball-dist-play1">- - - - </label>
                            </div>
                            <div class="col-md-2">
                                <label id="ball-miles-play1">- - - - </label>
                            </div>
                            <div class="col-md-4">
                                <label id="loc-play1">- - - - </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2">
                                <label> </label>
                            </div>
                            <div class="col-md-2">
                                <label id="ball-time-play1">- - - - </label>
                            </div>
                            <div class="col-md-2">
                                <label id="ball-min-play1">- - - - </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2">
                                <label>to player #2</label>
                            </div>
                            <div class="col-md-2">
                                <label id="ball-dist-play2">- - - - </label>
                            </div>
                            <div class="col-md-2">
                                <label id="ball-miles-play2">- - - - </label>
                            </div>
                            <div class="col-md-4">
                                <label id="loc-play2">- - - - </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2">
                                <label> </label>
                            </div>
                            <div class="col-md-2">
                                <label id="ball-time-play2">- - - - </label>
                            </div>
                            <div class="col-md-2">
                                <label id="ball-min-play2">- - - - </label>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-2">
                                <label>between players </label>
                            </div>
                            <div class="col-md-2">
                                <label id="ball-dist-total">- - - - </label>
                            </div>
                            <div class="col-md-2">
                                <label id="ball-miles-total">- - - - </label>
                            </div>
                        </div>

                    </div>
                </div>

            </div>
            <div class="panel panel-info" style="padding:3px; margin: 3px;">
                <div class="panel-body" style="padding:3px; margin: 3px;">

                    <div id="divMap" style="height:640px; width:420px; padding:2px">
                        <div class="modal-content" style="height:90%; width:90%; margin:0px; padding: 2px">
                            <span>
                                <h2>Pong 2180</h2>
                            </span>
                            <div id="map" style="height:85%; width:100%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!-- Modal windows come up next -->
        <!-- Info Modal -->
        <div id="modInfo" class="modal" style="height: 400px; width:90%;">
            <div class="modal-content" style="height:90%; width:90%;">
                <span id="closeModInfo" class="close close-Info">&times;</span>
                <h2>
                    <p>Information:</p>
                </h2>
                <p>Demonstration of Pong 2180</p>
                <p>Demo to show: 1. GPS entry 2. Address Generation</p>
                <p>3. Firebase disp coord 4. Google Maps Display</p>
                <p></p>
            </div>
        </div>
        <!-- GPS Modal -->
        <div id="modLocation" class="modal">
            <div class="modal-content">
                <span id="closeModLocation" class="close">&times;</span>
                <h2>
                    <p>Searching for GPS location</p>
                </h2>
                <p> </p>
                <p>Please allow location privaledge and then wait</p>
            </div>
        </div>



        <!-- style="height:90%; width:1020px; padding:2px" -->
        <!-- style="height:70%; width:1000px; margin:0px; padding: 2px" -->
        <div id="modMap" class="modal" style="height:640px; width:640px; padding:2px">
            <div class="modal-content" style="height:90%; width:90%; margin:0px; padding: 2px">
                <span>
                    <h2>Map</h2>
                </span>
                <span id="closeModMap" class="close">&times;</span>
                <div id="map-orig" style="height:85%; width:100%"></div>
            </div>
        </div>


        <script src="assets/javascript/pong2180_rou.js"></script>
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAE03QBe5yDXRr1fzDvkWs9i_E_BIyCDhk&libraries=places" async
            defer></script>
        <script src="https://apis.google.com/js/api.js" type="text/javascript"></script>



        <script>
            var connConfig;  //global variable
            var modalWaitLocation = document.getElementById('modLocation'); //location
            var modalMap = document.getElementById('modMap'); //map modal popup
            var closeModMap = document.getElementById("closeModMap");

            var dispBallData = function () {
                $('#ball-pos-x').text(ballPosObj.coord_x);
                $('#ball-pos-y').text(ballPosObj.coord_y);
                $('#ball-pos-lat').text(ballPosObj.coord_lat);
                $('#ball-pos-lon').text(ballPosObj.coord_lon);
                $('#ball-dist-play1').text(ballDistObj.dist_ball_play_1);
                $('#ball-dist-play2').text(ballDistObj.dist_ball_play_2);
                $('#ball-dist-total').text(ballDistObj.dist_players);
                console.log(ballDistObj.dist_players);
            };



            $(document).ready(function () {
                //getLocation();

                //display the ball coords
                dispBallData();

                //starts the db connection
                startConnection();

                $(document.body).on("click", ".btn-info", function () {
                    $("#modInfo").css("display", "block");
                });
                $(document.body).on("click", ".close-Info", function () {
                    $("#modInfo").css("display", "none");
                });


                $("#bttnUserInput").on("click", function (event) {
                    //submit button was pushed
                    console.log("submit clicked");
                    event.preventDefault();
                    //already in 
                    if (configData.dispRichOutput === true) {
                        /*
                        theaterObj.searchLat = numeral($("#input-lat").val()).format("+0000.000000");
                        theaterObj.searchLon = numeral($("#input-lon").val()).format("+0000.000000");
                        */
                        var distInKM = parseFloat($("#input-dist").val()) * 1.60934;
                        theaterObj.searchLoc.dist = numeral(distInKM).format("+0000.0000");
                    };

                    if (theaterObj.searchLoc.lat === "+0000.000000" || theaterObj.searchLoc.long === "+0000.000000") {
                        //left blank, so put in Evanston as default
                        theaterObj.searchLoc.lat = numeral(42.048995).format("+0000.000000");
                        theaterObj.searchLoc.long = numeral(-87.684505).format("+0000.000000");
                    };

                    //for modal popups
                    modalMap.style.display = "none"; //initally off on page load
                    //document.getElementById("container-map").style.display = "block";

                    startSearches();
                    dispAllPage2(true);
                });
            });
        </script>

</body>

</html>